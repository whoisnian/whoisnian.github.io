---
layout: post
title: 回首（2025.2）
categories: others
last_modified_at: 2025-02-05T17:32:39+08:00
---

> 4.5  

<!-- more -->

2024 只有春节和五一回了两次家，因此 2025 的春节假期就不去操心各项待办了，只想多陪陪父母，以后回家的次数估计也屈指可数。春节假期结束后像往年一样开始整理自己的年终回顾。

### 生活娱乐
__手机__：在 2024 春节回家后的 0℃ 环境下，手上的 OnePlus 7 Pro 满电续航只剩下约半小时，用了四年多的手机也是时候换了。先翻了遍国内各大品牌的安卓旗舰，没看到哪款算是比较中意的，索性扭头换了个 iPhone 15 Pro[^1]。一年的使用下来整体表现中规中矩，作为大多数人眼里的“手机”肯定是合格的，但与旧手机的各种功能差异总让我感觉“苹果用户得改变自己去适应手机，安卓用户可以改变手机来适应自己”，例如侧滑返回，文件管理，应用侧载等。旧手机也没有直接退休，三月份在附近找了个 OPPO 售后点很顺利地更换了电池[^2]，随即满血复活，再后面就变成了日常双持，电话/短信/支付/微信及其他的国内应用主要在新的苹果手机上，代理/刷网页/看视频/折腾及一些国际应用主要在旧的安卓手机上。

__游戏__：四月份的时候想多出去走走，于是尝试入坑经典游戏 [Ingress](https://ingress.com)，周末经常到周围的公园或者附近的如意湖占点[^3]，偶尔可以在游戏聊天室里见到活人。可惜 Ingress 从六月份开始通过 [Google Play Integrity](https://developer.android.com/google/play/integrity/overview) 强制要求设备满足 [STRONG_INTEGRITY](https://niantic.helpshift.com/hc/en/3-ingress/faq/4495-ingress-is-not-supported-on-this-device-configuration-error-android-only/)，自己的 LineageOS 安卓三方 ROM 就无法登录了[^4]，遂删游弃坑[^5]。五月份的时候西安有一个 StarsWar11 线下赛，其中包含有星际争霸2项目，有点心动但没找到可以同去的伙伴，也没下定一个人前往的决心，最终错过并留下了遗憾，后面应该不会再有类似的机会了。平时对电脑游戏的兴趣不是很高，只会趁一些时间点尝试下或新或旧的游戏体验，例如八月份的黑神话悟空发布，自己打到通关大概花了三周[^6]，感觉整体质量还算不错，但后半段的游戏赶工痕迹明显；九月底的炉石传说国服回归，又下载回来打了几周的酒馆战棋，刚回归时的掉线及排队令人印象深刻[^7]。对守望先锋的国服回归没有一点想法，星际争霸2的回归依旧遥遥无期，估计等星际回归了会再刷一遍战役，算是潦草地画上一个句号。

__动漫__：前面在追的两部动漫[^8] ⑤葬送的芙莉莲、④迷宫饭都顺利完结了，期待还能看到下一季。2024 关注的夏季番有 ①夜晚的水母不会游泳、③摇曳露营第三季、④Girls Band Cry，其中夜晚的水母不会游泳在结尾部分烂掉了；摇曳露营第三季则是画风的改动有点出戏，相比前面两季不太喜欢；Girls Band Cry 最开始被 3D 人物劝退并没有追番，刷到很多二创之后才开始从头看，看完感觉在 3D 效果和人物塑造上有点超出预期。秋季番追的有 ②拉面赤猫、②地下城中的人、①鹿乃子乃子乃子虎視眈眈，前面两个整体比较一般，但拉面赤猫的 [OP](https://www.youtube.com/watch?v=ewkQ5WTlGLc) 和 [ED](https://www.youtube.com/watch?v=5G1HNyn81HI) 印象不错；鹿乃子乃子乃子虎視眈眈则是被 PV 吸引，结果内容过于无聊，追到半路直接弃坑了。冬季番里主要是期待已久的 ⑤夏目友人帐第七季，保持了一如既往的温馨治愈，而另一个 ②胆大党则是看了几集后感觉不同部分之间有很强的割裂感，结果中途弃坑。除了新番外也找了一些没看过的老番来补，如 ④江户前精灵、⑤虫师，江户前精灵的 [OP](https://www.youtube.com/watch?v=wlTMXFbPfKw) 有点上头，虫师则像是从旁观者的角度静静记录世间百态。此外把一些看过的老番也拿出来重刷了，如 ⑤飞翔的魔女、⑤夏目友人帐前六季、⑤本田小狼与我、⑤幸运星等。

__旅游__：去年也想着多到其他城市转转，先攒点经验后面才可以往更远的地方跑，例如出国看看，但实际上并没有出去旅游几次。端午节的时候去了趟成都，有一个大学室友在那边，印象最深的是六个多小时的高铁，充满二次元的天府广场和春熙路，以及第一次吃冰粉；然后还有一个前同事刚搬到成都，跟着往西北进山，可惜没赶上毕棚沟景区，于是就近在汶川住了一晚[^9]，晚上看了下怎么用相机拍星空[^10]，感觉有点意思。第二天回程时顺路去了汶川映秀震中遗址[^11]和卧龙中华大熊猫苑神树坪基地[^12]，结果回到成都后没赶上返程高铁，还好离双流机场不远，临时换了成都到郑州的航班，感觉也还不错[^13]。国庆期间的三天加班折算成了调休，恶心的是要求年底前休完，不能连休超过2天，不能影响周一的周会，也不能连着节假日，所以没办法凑长假往远处跑了，顶多周四周五凑个周末算四天。当时正好刷到夏目友人帐第五季有提到水族馆[^14]，于是准备找个水族馆转转，简单搜索后决定去上海海洋水族馆[^15]，逛完感觉并没有想象中那么宏伟，但也还算有点意思。来回坐了两趟黄浦江上的轮渡[^16]，感觉有一种别样的生活气息[^17]。在上海待的三天天气较差，多半时间都是雨或雾，到最后一晚才在人山人海的外滩[^18]拍到比较完整的东方明珠[^19]。中间一天还去逛了豫园，有些地方会感到狭窄压抑[^20]，但多数地方还是感觉到精致[^21]与灵巧[^22]。

### 工作学习
__工作__：工作内容上整体变化不大，主要还是私有化部署的适配对接和工具/支付相关的功能迭代，运维方面遇到了 AWS 云服务的多次问题，例如 AWS 机房对部分恶意 IP 有黑名单，导致用户无法访问；RDS 底层实例故障导致生产数据库异常重启；EBS 卷读取延迟异常，提了工单后 AWS 说要进一步排查，过了两个月才回复说是底层系统过度负载导致的。六月份开始有阿里云的商务来做对接，评估墨刀迁移后的云服务费用可以减少一半，最终决定迁移，提前了大约两周进行迁移测试，然后趁国庆假期完成了线上主服务从 AWS 到阿里云的迁移[^23]。我这边主要迁移负载均衡和网络存储，另一同事则负责 K8S 集群和数据库，剩余有部分独立服务放到节后逐步进行平滑切换。十月份公司使用的[亿格云](https://www.eaglecloud.com)安全软件启用了网络准入限制，Kubuntu 24.04 LTS 上的联网 bug 让我从 Linux 切到了 Windows 11[^24]，实际的开发环境则是 vscode 远程到本机 Hyper-V 里的 Arch Linux 虚拟机，算是勉强能用。下载测试了 [Alacritty](https://github.com/alacritty/alacritty)、[WezTerm](https://github.com/wezterm/wezterm)、[Konsole](https://github.com/KDE/konsole) 等终端模拟器后还是换回了微软的 [Windows Terminal](https://github.com/microsoft/terminal)，后面发现公司内默认 DNS 对于部分国外网站的解析结果会被污染，因此又测试了 [CoreDNS](https://github.com/coredns/coredns)、[SmartDNS](https://github.com/pymumu/smartdns)、[mosdns](https://github.com/IrineSistiana/mosdns) 后在本机自建了 mosdns，使用 [dnsmasq-china-list](https://github.com/felixonmars/dnsmasq-china-list) 进行国内外分流，使用 [DNS over TLS](https://developers.google.com/speed/public-dns/docs/dns-over-tls) 获取干净的解析结果。

__折腾__：代理网关上的 [sing-box](https://github.com/SagerNet/sing-box) 隔一段时间就会进入异常状态，需要手动重启 systemd 服务，因此后面又换到了 [MetaCubeX](https://github.com/MetaCubeX/mihomo/tree/Alpha)。九月份宽带到期续费时，顺便从 200M 升级到了 500M，升级之后发现用来做代理网关的斐讯 N1 盒子性能太差，用 iperf3 测速时单核被打满，但带宽峰值只能到 250M 左右，多次调整测试后将入站配置从 tun 改成了 tproxy，代理网关才不再成为带宽瓶颈。十二月份的时候又遇到了部分网页加载缓慢，如 [V2EX](https://www.v2ex.com)、[YouTube](https://www.youtube.com) 等，从 [MetaCubeXD](https://github.com/metacubex/metacubexd) 看板的连接页面观察到有 UDP 类型的慢速代理连接，且目标端口为 443，因此推测是代理工具或中转节点对于 HTTP/3 的 QUIC 协议处理不够完善，手动添加了一条规则拦截所有发往 443 端口的 UDP 流量，后续不再出现加载缓慢的问题。AI 相关在本地搭建过 [ComfyUI](https://github.com/comfyanonymous/ComfyUI) 测试文生图[^25]，感觉周边生态非常丰富；也尝试用 [Tabby](https://github.com/TabbyML/tabby) 做代码补全，效果一般且运行过程中显卡风扇狂转，8G 显存的 3070 还是略显吃力，等后面想深入折腾的话估计得跟着显卡换整机了。

__开发__：换到苹果手机后发现 [share-Go](https://github.com/whoisnian/share-Go) 的部分前端功能在 Safari 上的表现不太符合预期，因此做了简单的修复，后面又参考其他常用软件输出的 ZIP 文件格式补充了压缩包对目录信息的处理。整理 [k8s-example](https://github.com/whoisnian/k8s-example) 的过程中涉及到 [Jaeger](https://github.com/jaegertracing/jaeger)，于是开坑 [tracing-benchmark](https://github.com/whoisnian/tracing-benchmark) 对比常见的几种分布式跟踪框架接入方式及大致性能，顺便补了两篇关于 [docker-proxy的高CPU使用率](https://whoisnian.com/2024/11/05/docker-proxy的高CPU使用率/) 和 [otel-trace中的spans队列](https://whoisnian.com/2024/12/17/otel-trace中的spans队列/) 的博客，最后又回过头来升级整理工具库 [glb](https://github.com/whoisnian/glb) 和模板库 [go-templates](https://github.com/whoisnian/go-templates)。调研 Axure HTML 文件托管时对后端存储的优化方案很感兴趣，于是周末自己实现了后端仅存储压缩包的两个版本：一个是收到请求时后端动态从压缩包中读取文件内容作为响应；另一个则是后端直接返回完整压缩包给前端，前端使用 Service worker 拦截网络请求并返回压缩包内对应文件。可惜最终为了赶进度直接跳过了后端存储的优化。

### 未来计划
2024 年的计划完成度相比之前略有提升，2025 年的整体方向保持不变，希望能实现更高的完成度。
* 生活：体重基本保持在 100kg，还是希望 2025 能多出去转转，再计划两次旅游吧。
* 学习：继续折腾，多尝试新的技术/工具，2025 的目标依旧是产出五篇以上博客。
* 工作：多做总结归纳，提取现有工作核心内容，尝试寻找自己将来想从事的工作方向。

---
### 注：

[^1]: [新入手的苹果手机](/public/image/iphone_15_pro.webp)  
[^2]: [旧一加换电池订单](/public/image/oneplus_7_pro_battery.webp)  
[^3]: [Ingress：在如意湖附近建立的 Field](/public/image/ingress_field.webp)  
[^4]: [Ingress：安卓手机无法登录](/public/image/ingress_not_supported.webp)  
[^5]: [Ingress：弃坑前的个人状态](/public/image/ingress_afk.webp)  
[^6]: [黑神话通关后的角色基础属性](/public/image/black_myth_wukong.webp)  
[^7]: [炉石传说国服回归后的异常排队](/public/image/hearthstone_queue.webp)  
[^8]: 个人主观评价等级：`⑤推荐重复观看`/`④推荐观看`/`③优缺点并存，可以观看`/`②一般水平，可以观看`/`①不推荐观看`  
[^9]: [晚上从半山腰俯瞰汶川](/public/image/wenchuan_night.webp)  
[^10]: [前同事相机下的星空](/public/image/wenchuan_stars.webp)  
[^11]: [汶川映秀震中遗址：漩口中学](/public/image/wenchuan_school.webp)  
[^12]: [卧龙中华大熊猫苑神树坪基地：熊猫](/public/image/panda_tongue.webp)  
[^13]: [从成都返回郑州的飞机上](/public/image/flight_sichuan_to_zhengzhou.webp)  
[^14]: [夏目友人帐第五季第十集](/public/image/natsume_s05e10.webp)  
[^15]: [上海海洋水族馆：水母](/public/image/jellyfish_red.webp)  
[^16]: [上海轮渡：东昌路渡口](/public/image/shanghai_ferry_dongchang.webp)  
[^17]: [上海轮渡：别样的生活气息](/public/image/shanghai_ferry_life.webp)  
[^18]: [人山人海的外滩](/public/image/shanghai_the_bund_people.webp)  
[^19]: [还算完整的东方明珠](/public/image/shanghai_oriental_pearl_night.webp)  
[^20]: [上海豫园：狭窄的一角](/public/image/shanghai_yu_garden_corner.webp)  
[^21]: [上海豫园：穿云龙墙](/public/image/shanghai_yu_garden_dragon_wall.webp)  
[^22]: [上海豫园：屋顶上的鹤](/public/image/shanghai_yu_garden_crane_statue.webp)  
[^23]: [墨刀系统升级维护公告](/public/image/modao_maintenance_announcement.webp)  
[^24]: [Windows 11 开发环境](/public/image/win11_dev_env.webp)  
[^25]: [ComfyUI 测试文生图](/public/image/comfyui_test.webp)  
